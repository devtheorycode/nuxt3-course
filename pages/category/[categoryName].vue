<script setup>
  const route = useRoute()
  const categoryName = route.params.categoryName

  const { data: products, pending } = await useLazyFetch(`http://localhost:3001/products/?category=${categoryName}`)
</script>

<template>
  <div>

    <div v-if="products">
      <h1 class="text-5xl text-center p-5">Cat√©gorie : {{ categoryName }}</h1>
      <cards-container class="mt-10">
        <product-card
          v-for="product in products"
          :id="product.id"
          :name="product.name"
          :price="product.price"
          :imageSrc="'/assets/images/'+product.imageName"
          />
      </cards-container>
    </div>

    <hero-loader v-else-if="pending" />
    
  </div>
</template>